<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Buddy - Goals</title>
    <link rel="stylesheet" href="style.css"> <!-- Link to shared CSS -->
</head>
<body>

    <div class="budget-buddy-container">
        <h1 class="budget-buddy-heading">Budget Buddy</h1>
    </div> 

    <!-- Navbar that spans the full width -->
    <nav class="navbar">
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="goals.html">Goals</a></li>
            <li><a href="profile.html">Profile</a></li>
        </ul>
    </nav>

    <!-- Container for the content -->
    <div class="container">
        <!-- Left section (optional for this page) -->
        <div class="left">
            <main>
                <h3>Expense Goals</h3>
                <p>Let's set our expense goals!</p>
                <section>
                    <form>
                        <p>Enter your desired maximum spendings in these categories: </p>
                        <label for="inputValue1">Rent and utilities: </label>
                        <input type="text" id="inputValue1" name="inputValue1">
                        <span id="rentAndUtilitiesGoal" class="goal-display"></span>
                        <br>

                        <p> </p>
                        <label for="inputValue2">Food and groceries: </label>
                        <input type="text" id="inputValue2" name="inputValue2">
                        <span id="foodGoal" class="goal-display"></span>
                        <br>

                        <p> </p>
                        <label for="inputValue3">Transportation: </label>
                        <input type="text" id="inputValue3" name="inputValue3">
                        <span id="transportationGoal" class="goal-display"></span>
                        <br>

                        <p> </p>
                        <label for="inputValue4">Miscellaneous: </label>
                        <input type="text" id="inputValue4" name="inputValue4">
                        <span id="miscellaneousGoal" class="goal-display"></span>
                        <br>
                        <p> </p>
                        <button type="button" onclick="assignInputs(event);">Submit</button> <!-- Changed to type="button" -->
                        <br>
                    </form>
                    <p id="confirmationMessage"></p> <!-- To display the confirmation message -->
                </section>
            </main>
        </div>

        <!-- Right section -->
        <div class="right">
            <main>
                <form style="text-align: left;">
                    <h3>Savings Goals</h3>
                    <p>Let's set our savings goals! 
                    <p>Enter your goal amount below: </p>
                    <label for="inputValue5">Savings: </label>
                    <input type="text" id="inputValue5" name="inputValue5">
                    <button type="button" onclick="assignSavings(event);">Submit</button> <!-- Changed to type="button" -->
                    <p id="savingsGoalDisplay" style="margin-top: 20px;"></p>
                    <br>
                </form>
                <p id="savingConfirmationMessage"></p> <!-- To display the confirmation message -->
            </main>
        </div>
    </div>

    <script>
        function assignInputs(event) {
            event.preventDefault(); // Prevent the form from submitting and refreshing the page
            const inputValue1 = document.getElementById('inputValue1').value;
            const inputValue2 = document.getElementById('inputValue2').value;
            const inputValue3 = document.getElementById('inputValue3').value;
            const inputValue4 = document.getElementById('inputValue4').value;
            
            // Assign the values to localStorage
            localStorage.setItem('rentAndUtilitiesGoal', inputValue1);
            localStorage.setItem('foodGoal', inputValue2);
            localStorage.setItem('transportationGoal', inputValue3);
            localStorage.setItem('miscellaneousGoal', inputValue4);

            // Confirmation message
            document.getElementById('confirmationMessage').innerText = "Your expense goals have been updated!";

            document.getElementById('inputValue1').value = '';
            document.getElementById('inputValue2').value = '';
            document.getElementById('inputValue3').value = '';
            document.getElementById('inputValue4').value = '';

            // Update goal displays
            updateGoalDisplays();
        }

        function updateExpenseGoalDisplay(category, goal) {
            const formattedGoal = parseFloat(goal).toFixed(2);
            document.getElementById(category + 'Goal').innerHTML = "<strong>Goal: </strong>$" + formattedGoal;
        }

        function updateGoalDisplays() {
            const categories = ['rentAndUtilities', 'food', 'transportation', 'miscellaneous'];
            categories.forEach(category => {
                const savedGoal = localStorage.getItem(category + 'Goal'); // Correctly retrieving the goal
                if (savedGoal) {
                    updateExpenseGoalDisplay(category, savedGoal);
                    document.getElementById('inputValue' + (categories.indexOf(category) + 1)).value = savedGoal;
                } else {
                    document.getElementById(category + 'Goal').innerHTML = "<strong>Goal: </strong>$0.00"; // Default display
                    document.getElementById('inputValue' + (categories.indexOf(category) + 1)).value = '';
                }
            });
        }

        function assignSavings(event) {
            event.preventDefault(); // Prevent the form from submitting and refreshing the page
            const inputValue5 = document.getElementById('inputValue5').value;
            
            // Assign the values to localStorage
            localStorage.setItem('savingsGoal', inputValue5); // Store as string

            // Confirmation message
            updateSavingsGoalDisplay(inputValue5);
            document.getElementById('savingConfirmationMessage').innerText = "Your savings goal has been updated!";
            document.getElementById('savingConfirmationMessage').style.textAlign = "left";
        }

        function updateSavingsGoalDisplay(savingsGoal) {
            document.getElementById('savingsGoalDisplay').innerHTML = "<strong>Savings goal: </strong>$" + parseFloat(savingsGoal).toFixed(2);
        }

        function loadSavingsGoal() {
            const savedGoal = localStorage.getItem('savingsGoal');
            if (savedGoal) {
                updateSavingsGoalDisplay(savedGoal);
            } else {
                document.getElementById('savingsGoalDisplay').innerHTML = "<strong>Savings goal: </strong>$0.00"; // Default display
            }
        }

        window.onload = function () {
            updateGoalDisplays(); // Load expense goals
            loadSavingsGoal(); // Load savings goal
        };
    </script>
</body>
</html>
